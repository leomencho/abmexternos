<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

<head>
  <title layout:title-pattern="$CONTENT_TITLE - ABM externos">ABM externos</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body.dark-mode { background-color: #121212; color: #ffffff; }
    body.dark-mode .btn { filter: brightness(0.85); }
    body.dark-mode .bg-light { background-color: #1f1f1f !important; border-color: #333 !important; }
    body.dark-mode hr { border-color: #444; }
  </style>
</head>

<body>
<!-- BARRA DE BOTONES -->
<div class="d-flex gap-2 p-2 bg-light border rounded justify-content-between">
  <div>
    <button class="btn btn-primary btn-lg" onclick="location.href='/buscar'">Buscar</button>
    <button class="btn btn-success btn-lg" onclick="location.href='/nuevo'">Nuevo</button>
    <div class="dropdown d-inline-block">
      <button class="btn btn-sm btn-info dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
        ‚ûï Agregar
      </button>
      <ul class="dropdown-menu">
        <li><a class="dropdown-item" href="/programas">ABM Programa</a></li>
        <li><a class="dropdown-item" href="/funciones">ABM Funci√≥n</a></li>
        <li><a class="dropdown-item" href="/reporta">ABM Reportar</a></li>
        <li><a class="dropdown-item" href="/estados">ABM Estado</a></li>
        <li><a class="dropdown-item" href="/perfiles">ABM Perfil</a></li>
        <li><a class="dropdown-item" href="/recursos">ABM Recursos</a></li>
      </ul>
    </div>
  </div>
  <button id="themeToggle" class="btn btn-secondary btn-lg">üåô Modo Oscuro</button>
</div>

<hr>

<!-- CONTENIDO DE LA VISTA HIJA -->
<section layout:fragment="content"></section>

<script>
  function toggleTheme() {
    document.body.classList.toggle('dark-mode');
    const isDark = document.body.classList.contains('dark-mode');
    document.getElementById('themeToggle').innerText = isDark ? '‚òÄÔ∏è Modo Claro' : 'üåô Modo Oscuro';
    localStorage.setItem('theme', isDark ? 'dark' : 'light');
  }

  document.getElementById('themeToggle').addEventListener('click', toggleTheme);

  (function() {
    if (localStorage.getItem('theme') === 'dark') {
      document.body.classList.add('dark-mode');
      document.getElementById('themeToggle').innerText = '‚òÄÔ∏è Modo Claro';
    }
  })();
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
