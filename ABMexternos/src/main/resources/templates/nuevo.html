<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
  <title>Nuevo Usuario</title>
</head>

<body>
<section layout:fragment="content">
  <div class="container mt-4">
    <h2 class="mb-4">Nuevo Usuario</h2>

    <!-- Mensajes de éxito o error -->
    <div th:if="${exito}" class="alert alert-success" th:text="${exito}"></div>
    <div th:if="${error}" class="alert alert-danger" th:text="${error}"></div>

    <form method="post" th:action="@{/api/usuarios}" th:object="${usuario}" class="row g-3">

      <!-- Campo oculto para ID -->
      <input type="hidden" th:field="*{idUsuarios}" />

      <!-- Nombre -->
      <div class="col-md-6">
        <label class="form-label">Nombre</label>
        <input type="text" th:field="*{nombre}" class="form-control" maxlength="50" required />
      </div>

      <!-- Apellido -->
      <div class="col-md-6">
        <label class="form-label">Apellido</label>
        <input type="text" th:field="*{apellido}" class="form-control" maxlength="50" required />
      </div>

      <!-- DNI -->
      <div class="col-md-4">
        <label class="form-label">DNI</label>
        <input type="text" th:field="*{dni}" class="form-control" maxlength="11" required />
      </div>

      <!-- CUIL -->
      <div class="col-md-4">
        <label class="form-label">CUIL</label>
        <input type="text" th:field="*{cuil}" class="form-control" placeholder="XX-XXXXXXXX-X" required />
      </div>

      <!-- Fecha de nacimiento -->
      <div class="col-md-4">
        <label class="form-label">Fecha de Nacimiento</label>
        <input type="date" th:field="*{fechaNacimiento}" class="form-control" required />
      </div>

      <!-- Teléfono -->
      <div class="col-md-4">
        <label class="form-label">Teléfono</label>
        <input type="text" th:field="*{telefono}" class="form-control" maxlength="20" />
      </div>

      <!-- Mail -->
      <div class="col-md-4">
        <label class="form-label">Email</label>
        <input type="email" th:field="*{mail}" class="form-control" maxlength="50" required />
      </div>


      <!-- Estado -->
      <div class="col-md-4">
        <label class="form-label">Estado</label>
        <select th:field="*{estado.idestado}" class="form-select" required>
          <option value="" disabled>Seleccione un estado...</option>
          <option th:each="estado : ${estados}"
                  th:value="${estado.idestado}"
                  th:text="${estado.tipoestado}">
          </option>
        </select>
      </div>

      <!-- Comentario -->
      <div class="col-md-12">
        <label class="form-label">Comentario</label>
        <textarea th:field="*{comentario}" class="form-control" rows="3" maxlength="500"></textarea>
      </div>

      <!-- Botón Guardar -->
      <div class="col-12">
        <button type="submit" class="btn btn-primary px-4">Guardar</button>
      </div>

    </form>
  </div>

  <!-- Footer -->
  <div th:replace="fragments/footer :: footer"></div>
</section>
</body>
</html>
